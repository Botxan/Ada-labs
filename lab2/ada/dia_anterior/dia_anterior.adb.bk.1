PROCEDURE dia_anterior(yy: in out Natural; mm, dd: in out Positive) IS
   es_bisiesto: Integer range 0..1;
BEGIN

   if (dd = 1) then
      if (mm = 1) then
         mm := 12;
         if (yy = 0) then
            raise constraint_error with "Ha llegado al ultimo dia a.C.";
         else
            yy := yy - 1;
         end if;
      else
         mm := mm - 1;
      end if;

      -- Comprobar si el año es bisiesto
      es_bisiesto := (if (yy rem 4 = 0) and ((yy rem 100 /= 0) or (yy rem 400 = 0)) then 1 else 0);

      -- Formula para calcular dias de cada mes, idea tomada de:
      -- http://www.dispersiondesign.com/articles/time/number_of_days_in_a_month
      dd := 31 - (if mm = 2 then (3 - es_bisiesto) else (mm - 1) rem 7 rem 2);
   else
      dd := dd - 1;
   end if;

END dia_anterior;