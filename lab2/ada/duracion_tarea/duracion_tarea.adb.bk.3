
PROCEDURE duracion_tarea(h, m, s: in out Natural; duracion: in Positive; dia_siguiente: out Boolean) IS
   -- Pre: h, m, s son numeros Naturales y duracion que es un numero positivo (>0)
   -- Post: hora de finalizacion de la tarea (h, m, s) y si ha cambiado el dia(cambio de jornada)(dia_siguiente: Boolean)
   hora_en_segundos: Natural:= (h*3600) + (m * 60) + s;
   duracion_restante: Natural := duracion; -- La pasamos a una variable del programa, porque los parametros IN no se pueden sobreescribir

BEGIN
   if duracion < 14401 then -- Si la jornada dura mas de 4 horas (14401s)

      if (hora_en_segundos + duracion > 57600) then -- Si duracion + hora inicial excede las 16 horas (57600s)
         dia_siguiente := true;

         duracion_restante := ((duracion + hora_en_segundos) - 57600);
         hora_en_segundos := 28800; -- Le sumamos a la duracion restante, las 8 de la mañana(28800)
      end if;

      h := (hora_en_segundos + duracion_restante) / 3600;
      m := ((hora_en_segundos + duracion_restante) / 60) rem 60;
      s := (hora_en_segundos + duracion_restante) rem 60;

   else
      raise constraint_error with "La duracion de la tarea no puede exceder la media jornada.";
   end if;
END duracion_tarea;